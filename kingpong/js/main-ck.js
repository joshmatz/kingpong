$("html, body").addClass("no-scroll");$(function(){function o(e,t){e=typeof e!="undefined"?e:$(window).scrollTop();var n=t.offset().top,r=t.offset().top+t.height(),i=r-n,s={inRange:!1,beginning:n,end:r,range:i};s.inRange=u(s);return s}function u(e,t){t=typeof t!="undefined"?t:0;e.end+=t;e.beginning+=t;return $(window).scrollTop()<e.end&&$(window).scrollTop()>=e.beginning?!0:!1}function a(){var e=$(window).scrollTop(),t=o(e,$("#title")),n=o(e,$("#movie")),r=o(e,$("#event")),i=o(e,$("#entry")),s=o(e,$("#sponsors"));e>t.end/3&&$(".placement").addClass("invisible");e<t.end&&e>t.beginning||$("#fader").css("opacity",0);if(e<r.beginning&&e>t.end){$("#fader").css("opacity",0);$("#dark-fader").css("opacity",0)}if(t.inRange||e<=0){$(".ui-slider-handle").addClass("invisible");$(".selected").removeClass("selected");$("#title-link").parent().addClass("selected");$(".current").removeClass("current");$("#title").addClass("current");var a=Math.abs(t.range-e+t.beginning);e!=0?setOpacity=Math.round(100*a/e)/100:setOpacity=1;setOpacity>1?setOpacity=1:setOpacity<0&&(setOpacity=1);$("#fader").css("opacity",setOpacity);$(".placement").css({bottom:30+(500-Math.round(100*a/t.range)/100*500),opacity:(t.end/6-e)/(t.end/6)})}if(n.inRange){$(".selected").removeClass("selected");$(".ui-slider-handle").removeClass("invisible");$(".current").removeClass("current");$("#movie").addClass("current")}if(u(r,-200)){$(".ui-slider-handle").addClass("invisible");$(".selected").removeClass("selected");$("#event-link").parent().addClass("selected");$(".current").removeClass("current");$("#event").addClass("current")}if(u(i,-200)){$(".ui-slider-handle").addClass("invisible");$(".selected").removeClass("selected");$("#entry-link").parent().addClass("selected");$(".current").removeClass("current");$("#entry").addClass("current")}if(u(s,-200)){$(".ui-slider-handle").addClass("invisible");$(".selected").removeClass("selected");$("#sponsors-link").parent().addClass("selected");$(".current").removeClass("current");$("#sponsors").addClass("current")}eventShiftedRange=r;if(eventShiftedRange.beginning-eventShiftedRange.range<e&&eventShiftedRange.end-eventShiftedRange.range>e){var a=Math.abs(eventShiftedRange.range-e+(eventShiftedRange.beginning-eventShiftedRange.range));$("#dark-fader").css("opacity",1-Math.round(100*(a/eventShiftedRange.range))/100)}e>eventShiftedRange.end-eventShiftedRange.range&&$("#dark-fader").css("opacity",1)}var e={lines:9,length:0,width:6,radius:10,corners:1,rotate:0,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"32px",left:"auto"};target=document.getElementById("spinner-placement"),spinner=(new Spinner(e)).spin(target);$("#player-toggle").switchify();$("#submitted").hide();$("#player-toggle").data("switch").bind("switch:slide",function(e,t){$("#doubles-partner").slideToggle("fast")});var t=$(window),n=$("#access .circle"),r=n.outerHeight(!0)*n.size(),i=80;$("#scrubber").css("height",t.height()-r-i);t.resize(function(){$("#scrubber").css("height",t.height()-r-i)});var s=$("#scrubber").slider({orientation:"vertical",max:Math.round(($(document).height()-$("#title").height()*2)/canvasVideo.frameDiff),min:Math.round(($(document).height()-$("#movie").height()-$("#event").height()-$("#sponsors").height()-500)/canvasVideo.frameDiff),value:Math.round(($(document).height()-$("#title").height())/canvasVideo.frameDiff),disabled:!0});$("#scrubber").on("slidechange",function(e,t){});$("#scrubber").on("click slide",function(e,t){$(".ui-slider-handle").css("margin-bottom",-17+Math.round((t.max-t.value)/(t.max-t.min)*17)+"px");$("html, body").animate({scrollTop:canvasVideo.startTop+canvasVideo.frameDiff*(100-t.value)},Math.round(.25*Math.abs(canvasVideo.startTop+canvasVideo.frameDiff*(100-t.value)-$(window).scrollTop())))});$("#access, #social, .ui-slider-handle, #down-arrow").addClass("invisible");$("label").addClass("visuallyhidden");$("a[href*=#]").each(function(){var e=$(this.hash),t=this.hash;if(t){var n=e.offset().top;$(this).click(function(t){t.preventDefault();if(!e.hasClass("current")){delay=300;$(".current").hasClass("title-slide")&&(delay=1e3);$("html, body").stop();$("html, body").animate({scrollTop:e.offset().top},Math.round(.5*Math.abs(e.offset().top-$(window).scrollTop())),"swing")}})}});$("#twitter").find("span").end().hover(function(){$(this).find("span").stop(!0,!0).fadeIn("fast")},function(){$(this).find("span").stop(!0,!0).fadeOut("fast")});$("#facebook").find("span").end().hover(function(){$(this).find("span").stop(!0,!0).fadeIn("fast")},function(){$(this).find("span").stop(!0,!0).fadeOut("fast")});$(window).scroll(function(){a()});$(".submit").click(function(e){e.preventDefault();var t=$.trim($("#player1-name").val()),n=$.trim($("#player2-name").val()),r=$.trim($("#player1-email").val()),i=$.trim($("#player2-email").val()),s=$.trim($("#player1-agency").val()),o=$.trim($("#player-toggle").val()),u=/^[a-zA-Z ]+/;if(!u.test(t)){alert("Please enter a valid name for player 1.");$("#player1-name").focus();return!1}if(o=="doubles"){var u=/^[a-zA-Z ]+/;if(!u.test(n)){alert("Please enter a valid name for player 2.");$("#player2-name").focus();return!1}var a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;if(!a.test(i)){alert("Please enter a valid Email address for player 2.");$("#player2-email").focus();return!1}}var a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;if(!a.test(r)){alert("Please enter a valid Email address for player 1.");$("#player1-email").focus();return!1}var u=/^[a-zA-Z ]+/;if(!u.test(s)){alert("Please enter a valid agency you for which you will be participating.");$("#player1-agency").focus();return!1}$.ajax({type:"POST",url:"/kingpongform.aspx",data:{p1name:t,p2name:n,p1email:r,p2email:i,agency:s,team:o,formtype:"request"},beforeSend:function(){$("body").css({cursor:"wait"});console.log("Sending...")},error:function(e){$("body").css({cursor:"default"});alert("Our server seems to be having problems. Try again?");return!1},success:function(e,t){$("body").css({cursor:"default"});$("#signup-form").slideUp();$("#submitted").slideDown("slow");console.log("Success!")}})})});$(window).load(function(){function r(){e.width()/e.height()<n?t.css({width:e.height()*n+"px",height:e.height()}):t.css({width:"100%",height:e.width()/n+"px"});t.width()>e.width()&&t.css("left",-Math.floor((t.width()-e.width())/2))}var e=$(window),t=$("#motion"),n=t.width()/t.height();if($("#access").hasClass("invisible")){$("#hider").addClass("invisible");$("#access").removeClass("invisible");$("#social").removeClass("invisible");$("#down-arrow").removeClass("invisible")}$("#spinner-placement").fadeOut("slow");window.setTimeout(function(){spinner.stop()},600);$("html, body").removeClass("no-scroll");canvasVideo.loadLargestSprites();$(window).resize(function(){r()}).trigger("resize")});